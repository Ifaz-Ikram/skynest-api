from pathlib import Path
path = Path('2.md')
text = path.read_text(encoding='utf-8')
old = "| Deposit capture | dvance_payment stored manually during booking. No workflow. | Gateway preauth/capture, pay-by-link, deposit schedule, reminder emails, refund rules. | No payment integration; no deposit status indicator; no reminders. | Integrate payment gateway, send automatic deposit requests, track status flags. |\n| Receipts | Not generated. | PDF/email receipt with method, reference, amount, staff. | Guests/staff cannot confirm deposit. | Implement deposit receipts (HTML+PDF) and store reference numbers. |\n| Guarantee policy | Not tracked. | Guarantee type (CC, company, voucher), release rules. | Booking may remain unguaranteed. | Add guarantee fields, expiry rules, alerts for expiring/failed guarantees. |"
new = "| Deposit capture | dvance_payment plus booking metadata now feed a deposit summary on every booking response (status, due vs collected, reminders). | Gateway preauth/capture, pay-by-link, deposit schedule, reminder emails, refund rules. | No payment gateway; reminders/manual outreach still manual. | Integrate payment gateway, automate deposit link delivery, escalate outstanding deposits. |\n| Receipts | /api/bookings/:id/deposit-receipt returns structured receipt data (amount, method, reference, timestamps) for emailing/PDF generation. | PDF/email receipt with method, reference, amount, staff. | No HTML/PDF rendering or templated email yet. | Layer PDF/email templates on top of the receipt payload; archive copies with staff signature. |\n| Guarantee policy | Booking metadata supports guarantee method, reference, expiry and notes (surfaced alongside deposit summary). | Guarantee type (CC, company, voucher), release rules. | No automated expiry alerts or validation checks. | Add scheduled checks for expiring/failed guarantees and UI alerts. |"
if old not in text:
    raise SystemExit('pattern not found in doc')
path.write_text(text.replace(old, new), encoding='utf-8')
